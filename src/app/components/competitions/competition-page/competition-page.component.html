<ng-container *ngrxLet="competition$ as competition">
  <p *ngIf="!competition">
    Could not find requested competition.
  </p>

  <ng-container *ngIf="!!competition">
    <div class="smart-layout-evenly">
      <div class="flex-grow-3">
        <sp-competition
          [competition]="competition"
          class="mb-3">
        </sp-competition>

        <ng-container *ngrxLet="points$ as points">
          <p *ngIf="points.length === 0">
            No points have been scored yet.
          </p>

          <sp-point
            *ngFor="let point of points"
            [point]="point"
            class="mb-3">
          </sp-point>
        </ng-container>
      </div>

      <ng-container *ngrxLet="validPokemon$ as validPokemon">
        <div class="card">
          <div class="card-body">
            <h3 class="mb-0">Valid Pokémon ({{ validPokemon.length }})</h3>

            <p *ngIf="validPokemon.length === 0">
              No valid Pokémon for this competition. This <em>probably</em> means you can catch any Pokémon, but check the rules just in case.
            </p>
          </div>

          <ul class="list-group list-group-flush">
            <li
              *ngFor="let pokemon of validPokemon; trackBy: trackByPokemon; last as isLast;"
              class="list-group-item pokemon-entry d-flex align-items-center">
              <span>
                {{ pokemon.dexNo}}. {{ pokemon.name }}
              </span>

              <span class="ms-auto">
                <a
                  [href]="pokemon.serebiiLink"
                  target="_blank"
                  title="View Pokémon on Serebii.net">
                  <img src="assets/images/serebii.png" alt="Serebii" height="32px" width="32px">
                </a>
                <a
                  [href]="pokemon.bulbapediaLink"
                  target="_blank"
                  title="View Pokémon on Bulbapedia">
                  <img src="assets/images/bulbapedia.png" alt="Bulbapedia" height="32px" width="32px">
                </a>
              </span>
            </li>
          </ul>
        </div>
      </ng-container>
    </div>
  </ng-container>
</ng-container>
